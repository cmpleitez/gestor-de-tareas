/*! jqBootstrapValidation - v1.3.7 - 2013-05-07
* http://reactiveraven.github.com/jqBootstrapValidation
* Copyright (c) 2013 David Godfrey; Licensed MIT */(function(r){var q=[],k={options:{prependExistingHelpBlock:!1,sniffHtml:!0,preventSubmit:!0,submitError:!1,submitSuccess:!1,semanticallyStrict:!1,removeSuccess:!0,bindEvents:[],autoAdd:{helpBlocks:!0},filter:function(){return!0}},methods:{init:function(i){var e=r.extend(!0,{},k);e.options=r.extend(!0,e.options,i);var a=this,n=r.unique(a.map(function(){return r(this).parents("form")[0]}).toArray());return r(n).bind("submit.validationSubmit",function(t){var s=r(this),l=0,v=s.find("input,textarea,select").not("[type=submit],[type=image]").filter(e.options.filter),g=s.find(".form-group"),o=v.filter(function(){return r(this).triggerHandler("getValidatorCount.validation")>0});o.trigger("submit.validation"),v.trigger("validationLostFocus.validation"),g.each(function(S,N){var y=r(N);(y.hasClass("issue")||y.hasClass("error"))&&(y.removeClass("issue").addClass("error"),l++)}),l?(e.options.preventSubmit&&(t.preventDefault(),t.stopImmediatePropagation()),s.addClass("error"),r.isFunction(e.options.submitError)&&e.options.submitError(s,t,o.jqBootstrapValidation("collectErrors",!0))):(s.removeClass("error"),r.isFunction(e.options.submitSuccess)&&e.options.submitSuccess(s,t))}),this.each(function(){var t=r(this),s=t.parents(".form-group").first(),l=s.find(".help-block").first(),v=t.parents("form").first(),g=[];if(!l.length&&e.options.autoAdd&&e.options.autoAdd.helpBlocks&&(l=r('<div class="help-block" />'),s.find(".controls").append(l),q.push(l[0])),e.options.sniffHtml){var o;if(t.data("validationPatternPattern")&&t.attr("pattern",t.data("validationPatternPattern")),t.attr("pattern")!==void 0&&(o="Not in the expected format<!-- data-validation-pattern-message to override -->",t.data("validationPatternMessage")&&(o=t.data("validationPatternMessage")),t.data("validationPatternMessage",o),t.data("validationPatternRegex",t.attr("pattern"))),t.attr("max")!==void 0||t.attr("aria-valuemax")!==void 0){var S=t.attr("max")!==void 0?t.attr("max"):t.attr("aria-valuemax");o="Too high: Maximum of '"+S+"'<!-- data-validation-max-message to override -->",t.data("validationMaxMessage")&&(o=t.data("validationMaxMessage")),t.data("validationMaxMessage",o),t.data("validationMaxMax",S)}if(t.attr("min")!==void 0||t.attr("aria-valuemin")!==void 0){var N=t.attr("min")!==void 0?t.attr("min"):t.attr("aria-valuemin");o="Too low: Minimum of '"+N+"'<!-- data-validation-min-message to override -->",t.data("validationMinMessage")&&(o=t.data("validationMinMessage")),t.data("validationMinMessage",o),t.data("validationMinMin",N)}if(t.attr("maxlength")!==void 0&&(o="Too long: Maximum of '"+t.attr("maxlength")+"' characters<!-- data-validation-maxlength-message to override -->",t.data("validationMaxlengthMessage")&&(o=t.data("validationMaxlengthMessage")),t.data("validationMaxlengthMessage",o),t.data("validationMaxlengthMaxlength",t.attr("maxlength"))),t.attr("minlength")!==void 0&&(o="Too short: Minimum of '"+t.attr("minlength")+"' characters<!-- data-validation-minlength-message to override -->",t.data("validationMinlengthMessage")&&(o=t.data("validationMinlengthMessage")),t.data("validationMinlengthMessage",o),t.data("validationMinlengthMinlength",t.attr("minlength"))),(t.attr("required")!==void 0||t.attr("aria-required")!==void 0)&&(o=e.builtInValidators.required.message,t.data("validationRequiredMessage")&&(o=t.data("validationRequiredMessage")),t.data("validationRequiredMessage",o)),t.attr("type")!==void 0&&t.attr("type").toLowerCase()==="number"){o=e.validatorTypes.number.message,t.data("validationNumberMessage")&&(o=t.data("validationNumberMessage")),t.data("validationNumberMessage",o);var y=e.validatorTypes.number.step;t.data("validationNumberStep")&&(y=t.data("validationNumberStep")),t.data("validationNumberStep",y);var j=e.validatorTypes.number.decimal;t.data("validationNumberDecimal")&&(j=t.data("validationNumberDecimal")),t.data("validationNumberDecimal",j)}t.attr("type")!==void 0&&t.attr("type").toLowerCase()==="email"&&(o="Not a valid email address<!-- data-validation-email-message to override -->",t.data("validationEmailMessage")&&(o=t.data("validationEmailMessage")),t.data("validationEmailMessage",o)),t.attr("minchecked")!==void 0&&(o="Not enough options checked; Minimum of '"+t.attr("minchecked")+"' required<!-- data-validation-minchecked-message to override -->",t.data("validationMincheckedMessage")&&(o=t.data("validationMincheckedMessage")),t.data("validationMincheckedMessage",o),t.data("validationMincheckedMinchecked",t.attr("minchecked"))),t.attr("maxchecked")!==void 0&&(o="Too many options checked; Maximum of '"+t.attr("maxchecked")+"' required<!-- data-validation-maxchecked-message to override -->",t.data("validationMaxcheckedMessage")&&(o=t.data("validationMaxcheckedMessage")),t.data("validationMaxcheckedMessage",o),t.data("validationMaxcheckedMaxchecked",t.attr("maxchecked")))}t.data("validation")!==void 0&&(g=t.data("validation").split(",")),r.each(t.data(),function(p,d){var c=p.replace(/([A-Z])/g,",$1").split(",");c[0]==="validation"&&c[1]&&g.push(c[1])});var w=g,V=[],T=function(p,d){g[p]=F(d)},B=function(p,d){if(t.data("validation"+d+"Shortcut")!==void 0)r.each(t.data("validation"+d+"Shortcut").split(","),function(m,u){V.push(u)});else if(e.builtInValidators[d.toLowerCase()]){var c=e.builtInValidators[d.toLowerCase()];c.type.toLowerCase()==="shortcut"&&r.each(c.shortcut.split(","),function(m,u){u=F(u),V.push(u),g.push(u)})}};do r.each(g,T),g=r.unique(g),V=[],r.each(w,B),w=V;while(w.length>0);var M={};r.each(g,function(p,d){var c=t.data("validation"+d+"Message"),m=!!c,u=!1;if(c||(c="'"+d+"' validation failed <!-- Add attribute 'data-validation-"+d.toLowerCase()+"-message' to input to change this message -->"),r.each(e.validatorTypes,function(f,h){if(M[f]===void 0&&(M[f]=[]),!u&&t.data("validation"+d+F(h.name))!==void 0){var E=h.init(t,d);m&&(E.message=c),M[f].push(r.extend(!0,{name:F(h.name),message:c},E)),u=!0}}),!u&&e.builtInValidators[d.toLowerCase()]){var x=r.extend(!0,{},e.builtInValidators[d.toLowerCase()]);m&&(x.message=c);var b=x.type.toLowerCase();b==="shortcut"?u=!0:r.each(e.validatorTypes,function(f,h){M[f]===void 0&&(M[f]=[]),!u&&b===f.toLowerCase()&&(t.data("validation"+d+F(h.name),x[h.name.toLowerCase()]),M[b].push(r.extend(x,h.init(t,d))),u=!0)})}u||r.error("Cannot find validation info for '"+d+"'")}),l.data("original-contents",l.data("original-contents")?l.data("original-contents"):l.html()),l.data("original-role",l.data("original-role")?l.data("original-role"):l.attr("role")),s.data("original-classes",s.data("original-clases")?s.data("original-classes"):s.attr("class")),t.data("original-aria-invalid",t.data("original-aria-invalid")?t.data("original-aria-invalid"):t.attr("aria-invalid")),t.bind("validation.validation",function(p,d){var c=I(t),m=[];return r.each(M,function(u,x){(c||c.length||d&&d.includeEmpty||e.validatorTypes[u].includeEmpty||e.validatorTypes[u].blockSubmit&&d&&d.submitting)&&r.each(x,function(b,f){e.validatorTypes[u].validate(t,c,f)&&m.push(f.message)})}),m}),t.bind("getValidators.validation",function(){return M});var A=0;r.each(M,function(p,d){A+=d.length}),t.bind("getValidatorCount.validation",function(){return A}),t.bind("submit.validation",function(){return t.triggerHandler("change.validation",{submitting:!0})}),t.bind((e.options.bindEvents.length>0?e.options.bindEvents:["keyup","focus","blur","click","keydown","keypress","change"]).concat(["revalidate"]).join(".validation ")+".validation",function(p,d){var c=I(t),m=[];d&&d.submitting?s.data("jqbvIsSubmitting",!0):p.type!=="revalidate"&&s.data("jqbvIsSubmitting",!1);var u=!!s.data("jqbvIsSubmitting");s.find("input,textarea,select").not("[type=submit]").each(function(x,b){var f=m.length;if(r.each(r(b).triggerHandler("validation.validation",d)||[],function(E,P){m.push(P)}),m.length>f)r(b).attr("aria-invalid","true");else{var h=t.data("original-aria-invalid");r(b).attr("aria-invalid",h!==void 0?h:!1)}}),v.find("input,select,textarea").not(t).not('[name="'+t.attr("name")+'"]').trigger("validationLostFocus.validation"),m=r.unique(m.sort()),m.length?(s.removeClass("validate error issue").addClass(u?"error":"issue"),e.options.semanticallyStrict&&m.length===1?l.html(m[0]+(e.options.prependExistingHelpBlock?l.data("original-contents"):"")):l.html('<ul role="alert"><li>'+m.join("</li><li>")+"</li></ul>"+(e.options.prependExistingHelpBlock?l.data("original-contents"):""))):(s.removeClass("issue error validate"),c.length>0&&s.addClass("validate"),l.html(l.data("original-contents"))),p.type==="blur"&&e.options.removeSuccess}),t.bind("validationLostFocus.validation",function(){e.options.removeSuccess})})},destroy:function(){return this.each(function(){var i=r(this),e=i.parents(".form-group").first(),a=e.find(".help-block").first(),n=i.parents("form").first();i.unbind(".validation"),n.unbind(".validationSubmit"),a.html(a.data("original-contents")),e.attr("class",e.data("original-classes")),i.attr("aria-invalid",i.data("original-aria-invalid")),a.attr("role",i.data("original-role")),r.inArray(a[0],q)>-1&&a.remove()})},collectErrors:function(i){var e={};return this.each(function(a,n){var t=r(n),s=t.attr("name"),l=t.triggerHandler("validation.validation",{includeEmpty:!0});e[s]=r.extend(!0,l,e[s])}),r.each(e,function(a,n){n.length===0&&delete e[a]}),e},hasErrors:function(){var i=[];return this.find("input,select,textarea").add(this).each(function(e,a){i=i.concat(r(a).triggerHandler("getValidators.validation")?r(a).triggerHandler("validation.validation",{submitting:!0}):[])}),i.length>0},override:function(i){k=r.extend(!0,k,i)}},validatorTypes:{callback:{name:"callback",init:function(i,e){var a={validatorName:e,callback:i.data("validation"+e+"Callback"),lastValue:i.val(),lastValid:!0,lastFinished:!0},n="Not valid";return i.data("validation"+e+"Message")&&(n=i.data("validation"+e+"Message")),a.message=n,a},validate:function(i,e,a){if(a.lastValue===e&&a.lastFinished)return!a.lastValid;if(a.lastFinished===!0){a.lastValue=e,a.lastValid=!0,a.lastFinished=!1;var n=a,t=i;L(a.callback,window,i,e,function(s){n.lastValue===s.value&&(n.lastValid=s.valid,s.message&&(n.message=s.message),n.lastFinished=!0,t.data("validation"+n.validatorName+"Message",n.message),setTimeout(function(){!i.is(":focus")&&i.parents("form").first().data("jqbvIsSubmitting")?t.trigger("blur.validation"):t.trigger("revalidate.validation")},1))})}return!1}},ajax:{name:"ajax",init:function(i,e){return{validatorName:e,url:i.data("validation"+e+"Ajax"),lastValue:i.val(),lastValid:!0,lastFinished:!0}},validate:function(i,e,a){return""+a.lastValue==""+e&&a.lastFinished===!0?a.lastValid===!1:(a.lastFinished===!0&&(a.lastValue=e,a.lastValid=!0,a.lastFinished=!1,r.ajax({url:a.url,data:"value="+encodeURIComponent(e)+"&field="+i.attr("name"),dataType:"json",success:function(n){""+a.lastValue==""+n.value&&(a.lastValid=!!n.valid,n.message&&(a.message=n.message),a.lastFinished=!0,i.data("validation"+a.validatorName+"Message",a.message),setTimeout(function(){i.trigger("revalidate.validation")},1))},failure:function(){a.lastValid=!0,a.message="ajax call failed",a.lastFinished=!0,i.data("validation"+a.validatorName+"Message",a.message),setTimeout(function(){i.trigger("revalidate.validation")},1)}})),!1)}},regex:{name:"regex",init:function(i,e){var a={},n=i.data("validation"+e+"Regex");a.regex=C(n),n===void 0&&r.error("Can't find regex for '"+e+"' validator on '"+i.attr("name")+"'");var t="Not in the expected format";return i.data("validation"+e+"Message")&&(t=i.data("validation"+e+"Message")),a.message=t,a.originalName=e,a},validate:function(i,e,a){return!a.regex.test(e)&&!a.negative||a.regex.test(e)&&a.negative}},email:{name:"email",init:function(i,e){var a={};a.regex=C("[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}");var n="Not a valid email address";return i.data("validation"+e+"Message")&&(n=i.data("validation"+e+"Message")),a.message=n,a.originalName=e,a},validate:function(i,e,a){return!a.regex.test(e)&&!a.negative||a.regex.test(e)&&a.negative}},required:{name:"required",init:function(i,e){var a="This is required";return i.data("validation"+e+"Message")&&(a=i.data("validation"+e+"Message")),{message:a,includeEmpty:!0}},validate:function(i,e,a){return!!(e.length===0&&!a.negative||e.length>0&&a.negative)},blockSubmit:!0},match:{name:"match",init:function(i,e){var a=i.data("validation"+e+"Match"),n=i.parents("form").first(),t=n.find('[name="'+a+'"]').first();t.bind("validation.validation",function(){i.trigger("revalidate.validation",{submitting:!0})});var s={};s.element=t,t.length===0&&r.error("Can't find field '"+a+"' to match '"+i.attr("name")+"' against in '"+e+"' validator");var l="Must match",v=null;return(v=n.find('label[for="'+a+'"]')).length?l+=" '"+v.text()+"'":(v=t.parents(".form-group").first().find("label")).length&&(l+=" '"+v.first().text()+"'"),i.data("validation"+e+"Message")&&(l=i.data("validation"+e+"Message")),s.message=l,s},validate:function(i,e,a){return e!==a.element.val()&&!a.negative||e===a.element.val()&&a.negative},blockSubmit:!0,includeEmpty:!0},max:{name:"max",init:function(i,e){var a={};return a.max=i.data("validation"+e+"Max"),a.message="Too high: Maximum of '"+a.max+"'",i.data("validation"+e+"Message")&&(a.message=i.data("validation"+e+"Message")),a},validate:function(i,e,a){return parseFloat(e,10)>parseFloat(a.max,10)&&!a.negative||parseFloat(e,10)<=parseFloat(a.max,10)&&a.negative}},min:{name:"min",init:function(i,e){var a={};return a.min=i.data("validation"+e+"Min"),a.message="Too low: Minimum of '"+a.min+"'",i.data("validation"+e+"Message")&&(a.message=i.data("validation"+e+"Message")),a},validate:function(i,e,a){return parseFloat(e)<parseFloat(a.min)&&!a.negative||parseFloat(e)>=parseFloat(a.min)&&a.negative}},maxlength:{name:"maxlength",init:function(i,e){var a={};return a.maxlength=i.data("validation"+e+"Maxlength"),a.message="Too long: Maximum of '"+a.maxlength+"' characters",i.data("validation"+e+"Message")&&(a.message=i.data("validation"+e+"Message")),a},validate:function(i,e,a){return e.length>a.maxlength&&!a.negative||e.length<=a.maxlength&&a.negative}},minlength:{name:"minlength",init:function(i,e){var a={};return a.minlength=i.data("validation"+e+"Minlength"),a.message="Too short: Minimum of '"+a.minlength+"' characters",i.data("validation"+e+"Message")&&(a.message=i.data("validation"+e+"Message")),a},validate:function(i,e,a){return e.length<a.minlength&&!a.negative||e.length>=a.minlength&&a.negative}},maxchecked:{name:"maxchecked",init:function(i,e){var a={},n=i.parents("form").first().find('[name="'+i.attr("name")+'"]');n.bind("change.validation click.validation",function(){i.trigger("revalidate.validation",{includeEmpty:!0})}),a.elements=n,a.maxchecked=i.data("validation"+e+"Maxchecked");var t="Too many: Max '"+a.maxchecked+"' checked";return i.data("validation"+e+"Message")&&(t=i.data("validation"+e+"Message")),a.message=t,a},validate:function(i,e,a){return a.elements.filter(":checked").length>a.maxchecked&&!a.negative||a.elements.filter(":checked").length<=a.maxchecked&&a.negative},blockSubmit:!0},minchecked:{name:"minchecked",init:function(i,e){var a={},n=i.parents("form").first().find('[name="'+i.attr("name")+'"]');n.bind("change.validation click.validation",function(){i.trigger("revalidate.validation",{includeEmpty:!0})}),a.elements=n,a.minchecked=i.data("validation"+e+"Minchecked");var t="Too few: Min '"+a.minchecked+"' checked";return i.data("validation"+e+"Message")&&(t=i.data("validation"+e+"Message")),a.message=t,a},validate:function(i,e,a){return a.elements.filter(":checked").length<a.minchecked&&!a.negative||a.elements.filter(":checked").length>=a.minchecked&&a.negative},blockSubmit:!0,includeEmpty:!0},number:{name:"number",init:function(i,e){var a={};a.step=1,i.attr("step")&&(a.step=i.attr("step")),i.data("validation"+e+"Step")&&(a.step=i.data("validation"+e+"Step")),a.decimal=".",i.data("validation"+e+"Decimal")&&(a.decimal=i.data("validation"+e+"Decimal")),a.thousands="",i.data("validation"+e+"Thousands")&&(a.thousands=i.data("validation"+e+"Thousands")),a.regex=C("([+-]?\\d+(\\"+a.decimal+"\\d+)?)?"),a.message="Must be a number";var n=i.data("validation"+e+"Message");return n&&(a.message=n),a},validate:function(i,e,a){for(var n=e.replace(a.decimal,".").replace(a.thousands,""),t=parseFloat(n),s=parseFloat(a.step);s%1!==0;)s=parseFloat(s.toPrecision(12))*10,t=parseFloat(t.toPrecision(12))*10;var l=a.regex.test(e),v=parseFloat(t)%parseFloat(s)===0,g=!isNaN(parseFloat(n))&&isFinite(n),o=!(l&&v&&g);return o},message:"Must be a number"}},builtInValidators:{email:{name:"Email",type:"email"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password<!-- data-validator-paswordagain-message to override -->"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed<!-- data-validator-integer-message to override -->"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number<!-- data-validator-positivenumber-message to override -->"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number<!-- data-validator-negativenumber-message to override -->"},required:{name:"Required",type:"required",message:"This is required<!-- data-validator-required-message to override -->"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option<!-- data-validation-checkone-message to override -->"},number:{name:"Number",type:"number",decimal:".",step:"1"},pattern:{name:"Pattern",type:"regex",message:"Not in expected format"}}},F=function(i){return i.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,a,n){return a+n.toUpperCase()})},I=function(i){var e=null,a=i.attr("type");if(a==="checkbox"){e=i.is(":checked")?e:"";var n=i.parents("form").first()||i.parents(".form-group").first();n&&(e=n.find("input[name='"+i.attr("name")+"']:checked").map(function(s,l){return r(l).val()}).toArray().join(","))}else if(a==="radio"){e=r('input[name="'+i.attr("name")+'"]:checked').length>0?i.val():"";var t=i.parents("form").first()||i.parents(".form-group").first();t&&(e=t.find("input[name='"+i.attr("name")+"']:checked").map(function(s,l){return r(l).val()}).toArray().join(","))}else a==="number"?i[0].validity.valid?e=i.val():i[0].validity.badInput||i[0].validity.stepMismatch?e="NaN":e="":e=i.val();return e};function C(i){return new RegExp("^"+i+"$")}function L(i,e){for(var a=Array.prototype.slice.call(arguments,2),n=i.split("."),t=n.pop(),s=0;s<n.length;s++)e=e[n[s]];return e[t].apply(e,a)}r.fn.jqBootstrapValidation=function(i){return k.methods[i]?k.methods[i].apply(this,Array.prototype.slice.call(arguments,1)):typeof i=="object"||!i?k.methods.init.apply(this,arguments):(r.error("Method "+i+" does not exist on jQuery.jqBootstrapValidation"),null)},r.jqBootstrapValidation=function(i){r(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}})(jQuery);
